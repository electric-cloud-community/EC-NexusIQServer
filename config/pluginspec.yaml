pluginInfo:
  # This is default sample specification
  # Feel free to change it
  # Call pdk showdoc pluginspec to see the list of available fields and their description
  pluginName: 'EC-NexusIQServer'
  version: '2.0.0'
  description: 'Integrates witn SonaType Nexus IQ Server reimplemented with PDK.'
  author: 'Shaohua Wen swen@cloudbees.com'
  supportUrl: 'none'
  category: 'Security'
  shell: 'ec-groovy'

# Plugin configuration description
configuration:
  # This is a shell used for checking connection
  shell: 'ec-groovy'
  # A script for checking connection will be generated
  checkConnection: 'true'
  # A set of fields will be added to process debug level in the configuration
  hasDebugLevel: true
  parameters:
  -
    name: config
    documentation: The name for the created configuration
    required: true
    type: entry
    label: Configuration Name
  -
    name: desc
    documentation: Description for the configuration
    required: false
    type: entry
    label: Description
  -
    name: nexusServerURL
    documentation: Specify the URL to the IQ Nexus server. For example http://nexus-iq-server:8070
    required: true
    type: entry
    label: IQ Nexus Server URL
  -
    name: nexusJavaLocation
    documentation: Full path to java binary or a command that should be used as java. If not set "java" will be used.
    required: false
    type: entry
    label: Java Location
  -
    name: nexusCLILocation
    documentation: Specify the absolute path to the IQ Nexus CLI. For example /opt/DevSecOps/nexus-iq-cli-1.47.0-01.jar
    required: true
    type: entry
    label: Nexus CLI Location
  -
    name: credential
    documentation: Specify the admin credentials for the IQ Nexus client to access the server.
    required: true
    type: credential
    label: Credential

procedures:
-
  name: 'Create Build Report'
  description: 'This procedure creates a build report using the Nexus CLI.'
  # configuration field will be generated automatically
  hasConfig: true
  parameters:
  -
    name: nexusApplicationId
    documentation: The name of the Application for which Build Report needs to be created. For example sandbox-application.
    required: true
    type: entry
    label: Application ID
  -
    name: nexusApplicationWarLocation
    documentation: Specify the absolute path to the Application WAR file. For example /opt/DevSecOps/struts2-rest-showcase-*.war
    required: true
    type: entry
    label: Application WAR Location
  outputParameters:
    Critical Violation Count: Critical Violation Count of the application
    Build Report URL:
    Violation Summary:
    License Issue Count:
    Security Issue Count:
    Component Count:
    Moderate Violation Count:
    Severe Violation Count:
